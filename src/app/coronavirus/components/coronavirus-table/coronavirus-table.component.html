<div class="field">
  <mat-label for="country-select" class="label">Faire une recherche</mat-label>
  <div class="control">
    <input class="input" (keyup)="applyFilter($event)" type="text" placeholder="Rechercher dans le tableau...">
  </div>
</div>
<div [class.container-table]="dataSource.data.length > 10">

  <table aria-describedby="tableDescription" mat-table matSort [dataSource]="dataSource" [matSortDisableClear]="true"
    [matSortActive]="selectedCountry.country === 'France' ? 'hospital' : 'cases'" matSortDirection="desc">

    <!-- Country Column -->
    <ng-container matColumnDef="translation">
      <th id="translation" mat-header-cell *matHeaderCellDef mat-sort-header>
        <ng-container *ngIf="selectedCountry.country !== 'France'">Pays</ng-container>
        <ng-container *ngIf="selectedCountry.country === 'France'">Lieux</ng-container>
      </th>
      <td mat-cell *matCellDef="let element">
        <span *ngIf="!selectedDivisionMap">
          {{element.translation}} {{element.provinceState}}
        </span>
        <ng-container *ngIf="!selectedTypeMap">
          <a *ngIf="selectedDivisionMap === 'regionFrance'" [routerLink]="['/stats/france/region/', element.slug]">
            {{element.translation}} {{element.provinceState}}
          </a>
          <a *ngIf="selectedDivisionMap === 'departmentFrance'"
            [routerLink]="['/stats/france/departement/', element.slug]">
            {{element.translation}} {{element.provinceState}}
          </a>
        </ng-container>
        <ng-container *ngIf="selectedTypeMap">
          <a *ngIf="selectedDivisionMap === 'regionFrance'"
            [routerLink]="['/test-depistage/france/region/', element.slug]">
            {{element.translation}} {{element.provinceState}}
          </a>
          <a *ngIf="selectedDivisionMap === 'departmentFrance'"
            [routerLink]="['/test-depistage/france/departement/', element.slug]">
            {{element.translation}} {{element.provinceState}}
          </a>
        </ng-container>

      </td>
    </ng-container>

    <!-- Confirmed Column -->
    <ng-container matColumnDef="cases">
      <th id="cases" mat-header-cell *matHeaderCellDef mat-sort-header>Confirmés</th>
      <td mat-cell *matCellDef="let element" class="has-text-warning">{{element.cases | number: '' :'fr-FR'}}</td>
    </ng-container>

    <!-- Today Column -->
    <ng-container matColumnDef="todayCases">
      <th id="todayCases" mat-header-cell *matHeaderCellDef mat-sort-header>Nouveaux cas</th>
      <td mat-cell *matCellDef="let element" class="has-text-warning">{{element.todayCases | symbolNumber}}</td>
    </ng-container>

    <!-- Actifs Column -->
    <ng-container matColumnDef="active">
      <th id="active" mat-header-cell *matHeaderCellDef mat-sort-header>Actifs</th>
      <td mat-cell *matCellDef="let element" class="hospital">
        {{element.active | number: '' :'fr-FR'}}
      </td>
    </ng-container>


    <!-- Deaths Column -->
    <ng-container matColumnDef="deaths">
      <th id="deaths" mat-header-cell *matHeaderCellDef mat-sort-header>Décès</th>
      <td mat-cell *matCellDef="let element" class="has-text-danger">
        {{element.deaths}}<br>
        <span class="rate" *ngIf="element.deathRate">({{element.deathRate}} %)</span>
      </td>
    </ng-container>

    <!-- Deaths Column -->
    <ng-container matColumnDef="todayDeaths">
      <th id="todayDeaths" mat-header-cell *matHeaderCellDef mat-sort-header>Nouveaux morts</th>
      <td mat-cell *matCellDef="let element" class="has-text-danger">
        {{element.todayDeaths | symbolNumber}}
      </td>
    </ng-container>


    <!-- Hospital Column -->
    <ng-container matColumnDef="hospital">
      <th id="hospital" mat-header-cell *matHeaderCellDef mat-sort-header>Hospitalisations en cours</th>
      <td mat-cell *matCellDef="let element" class="hospital">
        {{element.hospital | number: '' :'fr-FR'}}
      </td>
    </ng-container>

    <!-- Reanimation Column -->
    <ng-container matColumnDef="reanimation">
      <th id="reanimation" mat-header-cell *matHeaderCellDef mat-sort-header>Réanimations en cours</th>
      <td mat-cell *matCellDef="let element" class="reanimation">
        {{element.reanimation | number: '' :'fr-FR'}}
      </td>
    </ng-container>

    <!-- Recovered Column -->
    <ng-container matColumnDef="recovered">
      <th id="recovered" mat-header-cell *matHeaderCellDef mat-sort-header>Guéris</th>
      <td mat-cell *matCellDef="let element" class="has-text-success">
        {{element.recovered | number: '' :'fr-FR'}}<br>
        <span class="rate" *ngIf="element.recoveredRate">({{element.recoveredRate}} %)</span>
      </td>
    </ng-container>

    <!-- Test Total Column -->
    <ng-container matColumnDef="testTotal">
      <th id="testTotal" mat-header-cell *matHeaderCellDef mat-sort-header>Tests Total</th>
      <td mat-cell *matCellDef="let element">
        {{element.testTotal | number: '' :'fr-FR'}}<br>
      </td>
    </ng-container>

    <!-- Test Total Positive Column -->
    <ng-container matColumnDef="testTotalPositive">
      <th id="testTotalPositive" mat-header-cell *matHeaderCellDef mat-sort-header>Tests Total positifs </th>
      <td mat-cell *matCellDef="let element" class="has-text-danger">
        {{element.testTotalPositive | number: '' :'fr-FR'}}<br>
      </td>
    </ng-container>
    <!-- Test Homme Column -->
    <ng-container matColumnDef="testMen">
      <th id="testMen" mat-header-cell *matHeaderCellDef mat-sort-header>Tests Homme</th>
      <td mat-cell *matCellDef="let element">
        {{element.testMen | number: '' :'fr-FR'}}<br>
      </td>
    </ng-container>
    <!-- Test Homme Positif Column -->
    <ng-container matColumnDef="testMenPositive">
      <th id="testMenPositive" mat-header-cell *matHeaderCellDef mat-sort-header>Tests Homme positifs </th>
      <td mat-cell *matCellDef="let element" class="has-text-danger">
        {{element.testMenPositive | number: '' :'fr-FR'}}<br>
      </td>
    </ng-container>
    <!-- Test Femme  Column -->
    <ng-container matColumnDef="testWomen">
      <th id="recovered" mat-header-cell *matHeaderCellDef mat-sort-header>Tests Femme</th>
      <td mat-cell *matCellDef="let element">
        {{element.testWomen | number: '' :'fr-FR'}}<br>
      </td>
    </ng-container>

    <!-- Test Femme Positif Column -->
    <ng-container matColumnDef="testWomenPositive">
      <th id="recovered" mat-header-cell *matHeaderCellDef mat-sort-header>Tests Femme positifs </th>
      <td mat-cell *matCellDef="let element" class="has-text-danger">
        {{element.testWomenPositive | number: '' :'fr-FR'}}<br>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true;"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  </table>
</div>
