<div class="resume">
  <p>
    <ng-container *ngIf="mainStats.updated">
      Les données Worldometer ont été mises à jour le
      <strong>{{mainStats?.updated | date: 'd MMMM yyyy à HH:mm':'fr-FR'}}</strong>.<br>
    </ng-container>
    <!-- <ng-container *ngIf="lastUpdate">
      Les données hospitalières ont été mises à jour le <strong>{{lastUpdate | date: 'd MMMM yyyy' :'fr-FR'}} à
        19:00</strong> par Santé publique.<br>
    </ng-container> -->
  </p>
  <ng-container *ngIf="selectedZone">
    <article class="message is-info">
      <div class="message-header">
        <div>Le résumé du {{lastUpdate | date: 'd MMMM yyyy' :'fr-FR'}} dans {{selectedZone}} {{mainStats.translation}}</div>
        <!-- Les données hospitalières ont été mises à jour le <strong>{{lastUpdate | date: 'd MMMM yyyy' :'fr-FR'}} à
          19:00</strong> par Santé publique. -->
          <div class="fb-share-button"
          [attr.data-href]="'https://www.cascoronavirus.fr' + router.url"
          data-layout="button">
        </div>
        <a class="twitter-share-button"
        [href]="'https://twitter.com/intent/tweet?text=https://www.cascoronavirus.fr' + router.url">
      Tweet</a>
      </div>
      <div class="message-body">
        Au <strong>{{lastUpdate | date: 'd MMMM yyyy' :'fr-FR'}}</strong>,
        {{selectedZone}} <strong>{{mainStats.translation}}</strong> recense actuellement
        {{mainStats.hospital | number: '' :'fr-FR'}} patients hospitalisés pour cause de COVID-19 dont
        {{mainStats.reanimation | number: '' :'fr-FR'}} sont en réanimation.
        Après hospitalisation, {{mainStats.deaths | number: '' :'fr-FR'}} patients sont décédés et
        {{mainStats.recovered | number: '' :'fr-FR'}} patients sont retournés à leur domicile depuis le début de l'épidémie.
      </div>
    </article>

  </ng-container>
</div>

<div class="tile is-ancestor">
  <div class="tile is-parent" *ngIf="mainStats.cases !== undefined">
    <article class="tile is-child notification is-warning">
      <p class="title">{{mainStats.cases | number: '' :'fr-FR'}}
        <span class="increase" *ngIf="selectedCountry?.country === 'France'">
          ({{mainStats?.todayCases | symbolNumber: 'mainStats' }} en 24h)
        </span>
        <span class="increase" *ngIf="selectedCountry?.country !== 'France' && mainStats.todayCases">
          ({{mainStats?.todayCases | symbolNumber: 'mainStats' }})
        </span>
      </p>
      <p class="subtitle">Cas
        <ng-container *ngIf="selectedCountry.country !== 'France'">
          confirmés
        </ng-container>
        <span class="note">
          <ng-container *ngIf="mainStats?.todayCasesHospital">
            dont <strong class="important-stat">{{mainStats.casesHospital | number: '' :'fr-FR'}}</strong> confirmés
            ({{mainStats?.todayCasesHospital | symbolNumber: 'mainStats' }} en 24h)
          </ng-container>
          <ng-container *ngIf="mainStats?.todayCasesEhpad">
            et <strong class="important-stat">{{mainStats.casesEhpad | number: '' :'fr-FR'}}</strong> signalés
            ({{mainStats?.todayCasesEhpad | symbolNumber: 'mainStats' }} en 24h) en ESMS
          </ng-container>

        </span>
      </p>
      <div class="legend" *ngIf="selectedCountry.country === 'France'">
        Source : Worldometer avec les données remontées par les centres hospitaliers participants à SI-VIC et
        signalement liés au COVID-19 dans les ESMS
      </div>
      <div class="legend" *ngIf="selectedCountry.country !== 'France'">
        Source : Worldometer
      </div>
    </article>
  </div>
  <div class="tile is-parent" *ngIf="mainStats.hospital !== undefined">
    <article class="tile is-child notification hospital">
      <p class="title">{{mainStats.hospitalStart | number: '' :'fr-FR'}}
        <span class="increase">
          ({{mainStats.todayHospitalStart | symbolNumber: 'mainStats' }} en 24h)
        </span>
      </p>
      <p class="subtitle">Hospitalisés
        <span class="note">
          dont <strong class="important-stat">{{mainStats.hospital | number: '' :'fr-FR'}}</strong>
          ({{mainStats.todayHospital | symbolNumber: 'mainStats' }} en 24h) actuellement
        </span>
      </p>
      <p class="legend">
        Source : Données remontées par les centres hospitaliers participants à SI-VIC
      </p>
    </article>
  </div>
  <div class="tile is-parent" *ngIf="mainStats.active !== undefined && selectedCountry.country !== 'France'">
    <article class="tile is-child notification hospital">
      <p class="title">{{mainStats.active | number: '' :'fr-FR'}}
      </p>
      <p class="subtitle">Actifs</p>
      <p class="legend">
        Source : Worldometer
      </p>
    </article>
  </div>
  <div class="tile is-parent" *ngIf="mainStats.critical !== undefined ">
    <article class="tile is-child notification reanimation">
      <p class="title">{{mainStats.critical | number: '' :'fr-FR'}}
      </p>
      <p class="subtitle">Critiques</p>
      <p class="legend">
        Source : Worldometer
      </p>
    </article>
  </div>
  <div class="tile is-parent" *ngIf="mainStats.reanimation !== undefined">
    <article class="tile is-child notification reanimation">
      <p class="title">{{mainStats.reanimationStart | number: '' :'fr-FR'}}
        <span class="increase">
          ({{mainStats.todayReanimationStart | symbolNumber: 'mainStats' }} en 24h)
        </span>
      </p>
      <p class="subtitle">Admis en réanimation
        <span class="note">
          dont <strong class="important-stat">{{mainStats.reanimation | number: '' :'fr-FR'}}</strong>
          ({{mainStats?.todayReanimation | symbolNumber: 'mainStats' }} en 24h) actuellement
        </span>
      </p>
      <p class="legend">
        Source : Données remontées par les centres hospitaliers participants à SI-VIC
      </p>
    </article>
  </div>
  <div class="tile is-parent" *ngIf="mainStats.deaths !== undefined">
    <article class="tile is-child notification is-danger ">
      <ng-container *ngIf="mainStats.deathsHospital">
        <p class="title">
          {{mainStats.deaths | number: '' :'fr-FR'}}
          <span class="increase">
            ({{mainStats.todayDeaths | symbolNumber: 'mainStats' }} en 24h)
          </span>
        </p>
        <p class="subtitle">Décès
          <span class="note">
            dont <strong class="important-stat">{{mainStats.deathsHospital | number: '' :'fr-FR'}}</strong>
            ({{mainStats.todayDeathsHospital | symbolNumber: 'mainStats' }} en 24h) en milieu
            hospitalier et <strong class="important-stat">{{mainStats.deathsEhpad | number: '' :'fr-FR'}}</strong>
            ({{mainStats.todayDeathsEhpad | symbolNumber: 'mainStats'}} en 24h) en ESMS
          </span>
        </p>
        <p class="legend">
          Source : Worldometer avec les données remontées par les centres hospitaliers participants à SI-VIC et
          signalement
          liés au COVID-19 dans les ESMS
        </p>
      </ng-container>
      <ng-container *ngIf="mainStats.deaths !== undefined && !mainStats.deathsHospital">
        <p class="title">
          {{mainStats.deaths | number: '' :'fr-FR'}}
          <span class="increase" *ngIf="selectedCountry.country === 'France'">
            ({{mainStats.todayDeaths | symbolNumber: 'mainStats' }} en 24h)
          </span>
          <span class="increase" *ngIf="selectedCountry.country !== 'France' && mainStats.todayDeaths">
            ({{mainStats.todayDeaths | symbolNumber: 'mainStats' }})
          </span>
        </p>
        <p class="subtitle" *ngIf="selectedCountry.country === 'France'">Décès, <span class="rate">soit un taux de décès
            de <strong class="number">{{mainStats.deathRate.toFixed(1)}} %</strong> après hospitalisation</span>
        </p>
        <p class="subtitle" *ngIf="selectedCountry.country !== 'France'">Décès</p>
        <p class="legend" *ngIf="selectedZone">
          Source : Données remontées par les centres hospitaliers participants à SI-VIC
        </p>
        <p class="legend" *ngIf="selectedCountry?.country !== 'France'">
          Source : Worldometer
        </p>
      </ng-container>
    </article>
  </div>
  <div class="tile is-parent" *ngIf="mainStats.recovered !== undefined">
    <article class="tile is-child notification is-success active-map">
      <p class="title">
        {{mainStats.recovered | number: '' :'fr-FR'}}
        <span class="increase" *ngIf="selectedCountry?.country === 'France'">
          ({{mainStats.todayRecovered | symbolNumber: 'mainStats' }} en 24h)
        </span>
        <span class="increase" *ngIf="selectedCountry.country !== 'France' && mainStats.todayRecovered">
          ({{mainStats.todayRecovered | symbolNumber: 'mainStats' }})
        </span>

      </p>
      <p *ngIf="selectedCountry.country === 'France'" class="subtitle">Guéris<span class="rate" *ngIf="selectedZone">,
          soit un taux de guérison de
          <strong class="number" *ngIf="selectedCountry.country === 'France'">{{mainStats.recoveredRate.toFixed(1)}}
            %</strong> après hospitalisation</span>
        <span class="rate" *ngIf="!selectedZone">, soit un taux de guérison de
          <strong class="number">{{ mainStats.recovered | percentage : mainStats.hospitalStart  }}</strong> après
          hospitalisation
        </span>
      </p>
      <p class="subtitle" *ngIf="selectedCountry.country !== 'France'">Guéris</p>
      <p class="legend" *ngIf="selectedCountry?.country === 'France'">
        Source : Données remontées par les centres hospitaliers participants à SI-VIC
      </p>
      <p class="legend" *ngIf="selectedCountry?.country !== 'France'">
        Source : Worldometer
      </p>
    </article>
  </div>
</div>
